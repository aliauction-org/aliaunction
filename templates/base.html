<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AuctionVistas</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <nav>
        <ul>
            <li><a href="{% url 'auction_list' %}">Auction Listings</a></li>
            {% if user.is_authenticated %}
                <li>
                  <a href="#" id="notification-bell">üîî <span id="notification-count" style="color:#ff4b6e;"></span></a>
                  <div id="notification-dropdown" style="display:none; position:absolute; background:#23284a; border:1px solid #3a8dde; z-index:1000; min-width:250px;"></div>
                </li>
                <li><a href="{% url 'create_auction' %}">Create Auction</a></li>
                <li><a href="{% url 'profile' %}">Profile</a></li>
                <li><a href="{% url 'payment_profile' %}">Payment Profile</a></li>
                <li><a href="{% url 'payment_history' %}">Payment History</a></li>
                <li><form method="post" action="{% url 'logout' %}">{% csrf_token %}<button type="submit">Logout</button></form></li>
                <li><a href="#">Track Refunds</a></li>
            {% else %}
                <li><a href="{% url 'login' %}">Login</a></li>
                <li><a href="{% url 'register' %}">Signup</a></li>
            {% endif %}
            <li><a href="{% url 'contact_us' %}">Contact Us</a></li>
        </ul>
    </nav>
    <div class="header-gradient">
        Item (Auctions)
    </div>
    <div class="container">
        <div class="live-auctions-title">
            <span style="font-size:1.5rem; color:#ff4b6e;">‚óè</span> Live Auctions
        </div>
        <div class="live-auctions-desc">Discover and bid on unique items from trusted sellers in real time.</div>
        <div class="auction-grid">
            {% block content %}{% endblock %}
        </div>
    </div>
    <div class="newsletter">
        <div>
            <h2>Stay Ahead with AuctionVistas</h2>
            <div>Get the latest updates on live auctions, exclusive items, and bidding tips delivered to your inbox.</div>
            <form method="post" action="{% url 'newsletter_signup' %}" style="margin-top:1rem; display:flex; align-items:center;">
                {% csrf_token %}
                <input type="email" name="email" placeholder="Your email address" required>
                <button type="submit">Subscribe</button>
            </form>
            {% if newsletter_message %}
                <div class="alert" style="margin-top:0.7rem;">{{ newsletter_message }}</div>
            {% endif %}
            <div style="font-size:0.95rem; margin-top:0.5rem;">Join our community of passionate bidders and sellers!</div>
        </div>
        <div>
            <!-- Placeholder for newsletter illustration -->
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="120" height="120" rx="24" fill="url(#paint0_linear)"/>
                <defs>
                <linearGradient id="paint0_linear" x1="0" y1="0" x2="120" y2="120" gradientUnits="userSpaceOnUse">
                <stop stop-color="#3a8dde"/>
                <stop offset="1" stop-color="#7ecbff"/>
                </linearGradient>
                </defs>
            </svg>
        </div>
    </div>
    <footer>
        <div class="footer-content">
            <div>
                <h3>AuctionVistas</h3>
                <div style="max-width:260px; color:#b0b6d6; font-size:0.95rem;">AuctionVistas is your trusted platform for discovering, bidding, and winning unique items. Experience secure transactions, real-time updates, and a vibrant auction community.</div>
                <div style="margin-top:1rem;">
                    <a href="#"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/twitter.svg" width="22" style="margin-right:8px;filter:invert(0.7);"></a>
                    <a href="#"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/facebook.svg" width="22" style="margin-right:8px;filter:invert(0.7);"></a>
                    <a href="#"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/instagram.svg" width="22" style="filter:invert(0.7);"></a>
                </div>
            </div>
            <div>
                <h3>Marketplace</h3>
                <ul>
                    <li><a href="#">Live Auctions</a></li>
                    <li><a href="#">Upcoming Items</a></li>
                    <li><a href="#">Sell with Us</a></li>
                    <li><a href="#">Categories</a></li>
                    <li><a href="#">How It Works</a></li>
                </ul>
            </div>
            <div>
                <h3>Support</h3>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Buyer & Seller Guides</a></li>
                    <li><a href="#">Safe Bidding Tips</a></li>
                    <li><a href="#">Contact Support</a></li>
                    <li><a href="#">Terms & Privacy</a></li>
                </ul>
            </div>
            <div>
                <h3>Latest News</h3>
                <ul>
                    <li>How to Win Your First Auction</li>
                    <li>Spotlight: Rare Finds of the Month</li>
                </ul>
            </div>
        </div>
    </footer>
    <script>
  function fetchNotifications() {
    fetch('/notifications/api/unread/')
      .then(response => response.json())
      .then(data => {
        const count = data.notifications.length;
        document.getElementById('notification-count').textContent = count > 0 ? count : '';
        let dropdown = document.getElementById('notification-dropdown');
        if (count > 0) {
          let html = '<ul style="list-style:none; margin:0; padding:0;">';
          data.notifications.forEach(n => {
            html += `<li style='padding:8px; border-bottom:1px solid #eee;'>${n.message} <button onclick='markRead(${n.id})'>Mark as read</button></li>`;
          });
          html += '</ul>';
          dropdown.innerHTML = html;
        } else {
          dropdown.innerHTML = '<div style="padding:8px;">No new notifications.</div>';
        }
      });
  }
  function markRead(id) {
    fetch(`/notifications/api/read/${id}/`)
      .then(() => fetchNotifications());
  }
  setInterval(fetchNotifications, 3000);
  document.getElementById('notification-bell').addEventListener('click', function(e) {
    e.preventDefault();
    let dropdown = document.getElementById('notification-dropdown');
    dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
  });
  document.addEventListener('click', function(e) {
    if (!e.target.closest('#notification-bell')) {
      document.getElementById('notification-dropdown').style.display = 'none';
    }
  });
</script>
</body>
</html> 