{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="display: flex; justify-content: center; padding: 2rem 0;">
  <div class="card" style="width: 100%; max-width: 800px; padding: 0;">
    <div class="card-header" style="padding: 2rem; border-bottom: 1px solid var(--border-color); text-align: center;">
      <h1 style="font-size: 1.75rem; color: var(--text-main); margin-bottom: 0.5rem;">Create New Auction</h1>
      <p style="color: var(--text-secondary); margin: 0;">List your item for thousands of potential buyers</p>
    </div>

    <div class="card-body" style="padding: 2rem;">
      {% if messages %}
      <div class="messages" style="margin-bottom: 2rem;">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}"
          style="padding: 1rem; border-radius: var(--radius-sm); font-size: 0.95rem; background-color: {% if message.tags == 'error' %}#fef2f2{% else %}#f0fdf4{% endif %}; color: {% if message.tags == 'error' %}#dc2626{% else %}#15803d{% endif %}; border: 1px solid {% if message.tags == 'error' %}#fecaca{% else %}#bbf7d0{% endif %};">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
          {% for field in form %}
          <div class="form-group"
            style="grid-column: {% if field.name == 'description' or field.name == 'title' or field.name == 'image' %} 1 / -1 {% else %} span 1 {% endif %}; margin-bottom: 1rem;">
            <label for="{{ field.id_for_label }}"
              style="display: block; font-weight: 600; color: var(--text-main); margin-bottom: 0.5rem;">
              {{ field.label }}
              {% if field.field.required %}
              <span style="color: var(--danger-color);">*</span>
              {% endif %}
            </label>

            {% if field.name == 'image' %}
            <div
              style="border: 2px dashed var(--border-color); padding: 2rem; text-align: center; border-radius: var(--radius-md); background: var(--bg-secondary);">
              {{ field }}
              <div style="margin-top: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Supported formats: JPG, PNG,
                WEBP</div>
            </div>
            {% else %}
            <div style="position: relative;">
              {% if field.name == 'starting_bid' or field.name == 'buy_now' %}
              <span
                style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-muted);">â‚¹</span>
              {% endif %}

              <input type="{{ field.field.widget.input_type|default:'text' }}" name="{{ field.name }}"
                id="{{ field.id_for_label }}" value="{{ field.value|default:'' }}" 
                {% if field.field.required %}required{% endif %}
                {% if field.field.widget.attrs.step %}step="{{ field.field.widget.attrs.step }}"{% endif %}
                {% if field.field.widget.attrs.min %}min="{{ field.field.widget.attrs.min }}"{% endif %}
                class="form-control"
                style="width: 100%; padding: 0.75rem; padding-left: 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 1rem; transition: border-color 0.2s;">
            </div>
            {% endif %}

            {% if field.help_text %}
            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem;">{{ field.help_text|safe
              }}</div>
            {% endif %}

            {% if field.errors %}
            <div style="color: var(--danger-color); font-size: 0.85rem; margin-top: 0.5rem;">{{ field.errors.0 }}</div>
            {% endif %}
          </div>
          {% endfor %}
        </div>

        <div style="margin-top: 2rem; display: flex; gap: 1rem; align-items: center;">
          <button type="submit" class="btn btn-primary" style="padding: 1rem 2rem; font-size: 1.1rem; flex: 1;">Create
            Auction</button>
          <a href="{% url 'dashboard_home' %}" class="btn btn-outline"
            style="padding: 1rem 2rem; font-size: 1.1rem;">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  textarea {
    width: 100%;
    min-height: 150px;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    font-family: inherit;
    resize: vertical;
  }

  textarea:focus,
  input:focus {
    outline: none;
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  }

  input[type="file"] {
    border: none !important;
    padding: 0 !important;
  }
</style>
{% endblock %}